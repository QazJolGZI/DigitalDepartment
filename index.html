{% load socialaccount %}
{% load static i18n %}
{% load rcmb_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RCMBase</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="/media/images/logo_mini2.png" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
{#    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">#}
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
<div class="body">
    
  </div>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    document.getElementById("logout_button")?.addEventListener("click", function() {
        document.getElementById("logout-dialog").style.display = "flex";
    });
    document.getElementById("edit_profile_button")?.addEventListener("click", function() {
        document.getElementById("edit-profile-dialog").style.display = "flex";
    });


    // cancel confirmation dialog
    function addClickListenerToButtons(buttonId, callback) {
        var buttons = document.querySelectorAll("#" + buttonId);
        for (var i = 0; i < buttons.length; i++) {
            buttons[i].addEventListener("click", callback);
        }
    }
    // Custom function to handle the click event for the buttons
    function handleButtonClick(event) {
        var conf_dialogs = document.getElementsByClassName("confirmation-dialog");
        for (var i = 0; i < conf_dialogs.length; i++) {
            conf_dialogs[i].style.display = "none";
        }
    }
    // Call the custom function to add the event listener to all buttons with the same ID
    addClickListenerToButtons("cancel-delete-button", handleButtonClick);

    function deleteInvtech(event) {
        event.preventDefault();
        var invtechId = $('#confirm-itdelete-button').data('invtech-id');
        $.ajax({
            url: '{% url 'invtech_delete' %}',
            type: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'  // Replace with your Django template syntax
            },
            data: {
                id: invtechId
            },
            success: function(response) {
                if (response.status === 'success') {
                    console.log(response.message);
                    window.location.href = "{% url 'polls:profile' %}"
                } else {
                    console.error(response.message);
                }
            },
            error: function(xhr, textStatus, error) {
                console.error('Request failed:', error);
            }
        });
    }

    function deleteKarzav(event) {
        event.preventDefault();
        var nedro_id = $('#confirm-kzdelete-button').data('karzav-id');
        $.ajax({
            url: '{% url 'material_delete' %}',
            type: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'  // Replace with your Django template syntax
            },
            data: {
                nedro_id: nedro_id
            },
            success: function(response) {
                if (response.status === 'success') {
                  console.log(response.message);
                  window.location.href = "{% url 'polls:profile' %}"
                } else {
                  // Error handling
                  console.error(response.message);
                  // Display an error message or handle the error in an appropriate way
                }
            },
            error: function(xhr, textStatus, error) {
                // Error handling
                console.error('Request failed:', error);
                // Display an error message or handle the error in an appropriate way
            }
        });
    }
    function deleteTempKarzav(event) {
        event.preventDefault();
        var nedro_id = $('#confirm-tempkzdelete-button').data('karzav-id');
        $.ajax({
            url: '{% url 'entapp_karzav_delete' %}',
            type: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'  // Replace with your Django template syntax
            },
            data: {
                id: nedro_id
            },
            success: function(response) {
                if (response.status === 'success') {
                  console.log(response.message);
                  window.location.href = "{% url 'polls:profile' %}"
                } else {
                  // Error handling
                  console.error(response.message);
                  // Display an error message or handle the error in an appropriate way
                }
            },
            error: function(xhr, textStatus, error) {
                // Error handling
                console.error('Request failed:', error);
                // Display an error message or handle the error in an appropriate way
            }
        });
    }

    function deleteTit(event) {
        event.preventDefault();
        var invtechId = $('#confirm-titdelete-button').data('tit-id');
        $.ajax({
            url: '{% url 'entapp_invtech_delete' %}',
            type: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'  // Replace with your Django template syntax
            },
            data: {
                id: invtechId
            },
            success: function(response) {
                if (response.status === 'success') {
                    console.log(response.message);
                    window.location.href = "{% url 'polls:profile' %}"
                } else {
                    console.error(response.message);
                }
            },
            error: function(xhr, textStatus, error) {
                console.error('Request failed:', error);
            }
        });
    }


    function deleteTkz(event) {
        event.preventDefault();
        var nedro_id = $('#confirm-tkzdelete-button').data('tkz-id');
        $.ajax({
            url: '{% url 'entapp_material_delete' %}',
            type: 'POST',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}'  // Replace with your Django template syntax
            },
            data: {
                id: nedro_id
            },
            success: function(response) {
                if (response.status === 'success') {
                  console.log(response.message);
                  window.location.href = "{% url 'polls:profile' %}"
                } else {
                  // Error handling
                  console.error(response.message);
                  // Display an error message or handle the error in an appropriate way
                }
            },
            error: function(xhr, textStatus, error) {
                // Error handling
                console.error('Request failed:', error);
                // Display an error message or handle the error in an appropriate way
            }
        });
    }

    function initializeSlider(sliderId) {
      var container = document.getElementById(sliderId);
      var slider = container.querySelector("#slider");
      var buttons = container.getElementsByClassName("btn");

      var currentPosition = 0;
      var slidesPerPage = 4;
      var slidesCount = slider.getElementsByClassName("slide").length - slidesPerPage;
      var currentMargin = 0;

      window.addEventListener("resize", checkWidth);
      checkWidth();
      if (currentPosition === 0) {
        buttons[0].classList.add("inactive");
      }

      function checkWidth() {
        var containerWidth = container.offsetWidth;
        setParams(containerWidth);
      }

      function setParams(width) {
        slidesCount = Math.max(0, slider.getElementsByClassName("slide").length - slidesPerPage);

        if (currentPosition > slidesCount) {
          currentPosition = slidesCount;
        }
        currentMargin = -currentPosition * (19 + 1.5 + .125);
        slider.style.marginLeft = currentMargin + "rem";
        if (currentPosition === 0) {
          buttons[0].classList.add("inactive");
        } else {
          buttons[0].classList.remove("inactive");
        }
        if (currentPosition >= slidesCount) {
          buttons[1].classList.add("inactive");
        } else {
          buttons[1].classList.remove("inactive");
        }
      }

      function slideRight() {
        if (currentPosition > 0) {
          currentPosition--;
          currentMargin = -currentPosition * (19 + 1.5 + .125);
          slider.style.marginLeft = currentMargin + "rem";
          buttons[0].classList.remove("inactive");
          buttons[1].classList.remove("inactive");
          if (currentPosition === 0) {
            buttons[0].classList.add("inactive");
          }
        }
      }

      function slideLeft() {
        if (currentPosition < slidesCount) {
          currentPosition++;
          currentMargin = -currentPosition * (19 + 1.5 + .125);
          slider.style.marginLeft = currentMargin + "rem";
          buttons[0].classList.remove("inactive");
          buttons[1].classList.remove("inactive");
          if (currentPosition === slidesCount) {
            buttons[1].classList.add("inactive");
          }
        }
      }

      // Assign click event handlers to the buttons
      buttons[0].onclick = slideRight;
      buttons[1].onclick = slideLeft;
    }


// Initialize each slider with their respective IDs
    if (document.getElementById("container1") !== undefined && document.getElementById("container1") !== null) {
        initializeSlider("container1");
    }
    if (document.getElementById("container2") !== undefined && document.getElementById("container2") !== null) {
        initializeSlider("container2");
    }
    if (document.getElementById("container3") !== undefined && document.getElementById("container3") !== null) {
        initializeSlider("container3");
    }
    if (document.getElementById("container4") !== undefined && document.getElementById("container4") !== null) {
        initializeSlider("container4");
    }
    if (document.getElementById("container5") !== undefined && document.getElementById("container5") !== null) {
        initializeSlider("container5");
    }

    function eraseCookie(name) {
        document.cookie = name+'=; Max-Age=-99999999;';
    }
    function setCookie(cName, cValue, expDays) {
        let date = new Date();
        date.setTime(date.getTime() + (expDays * 24 * 60 * 60 * 1000));
        const expires = "expires=" + date.toUTCString();
        document.cookie = cName + "=" + cValue + "; " + expires + "; path=/";
    };

    {##}
    {#function it_showClicked(button) {#}
    {#    var ppit_id1 = button.value;//document.getElementById("itshowbtn").value;#}
    {#    document.cookie = "ppit_id1=" + ppit_id1;#}
    {#    setCookie('ppit_id1', ppit_id1);#}
    {#    setCookie('ppkz_id1', -1);#}
    {#    //alert(ppit_id1);#}
    {#    var l = "{% url 'polls:mypublication' %}";#}
    {#    location.href = l;#}
    {# };#}

    {#function it_showClicked(id) {#}
    {#    document.cookie = "alink2=" + id;#}
    {#    setCookie('alink2', id);#}
    {#    //alert(ppit_id1);#}
    {#    var l = "{% url 'invtech_infov' %}";#}
    {#    location.href = l;#}
    {# };#}
    function it_editClicked(id) {
        var ppit_id2 = id;//document.getElementById("iteditbtn").value;
        document.cookie = "ppit_id2=" + ppit_id2;
        setCookie('ppit_id2', ppit_id2);
        setCookie('pptit_id2', -1);
        //alert('it_editClicked --- ' + ppit_id2);
        var l = "{% url 'invtech_edit' %}";
        location.href = l;
    };
    function it_deleteClicked(id) {
        $('#confirm-itdelete-button').data('invtech-id', id);
        document.getElementById("delete-invtech-dialog").style.display = "flex";
    };

    function kz_editClicked(id) {
        var ppkz_id2 = id;
        document.cookie = "ppkz_id2=" + ppkz_id2;
        setCookie('ppkz_id2', ppkz_id2);
        setCookie('pptkz_id2', -1);
        //alert('kz_editClicked --- ' + ppkz_id2);
        var l = "{% url 'material_edit' %}";
        location.href = l;
    };
    function kz_deleteClicked(id) {
        $('#confirm-kzdelete-button').data('karzav-id', id);
        document.getElementById("delete-karzav-dialog").style.display = "flex";
    };



    function karzav_showClicked(id) {
        var ppkz_id1 = id;
        document.cookie = "link_temp_karzav=" + ppkz_id1;
        setCookie('link_temp_karzav', ppkz_id1);
        var l = "{% url 'polls:mypublication' %}";
        location.href = l;
    };
    function karzav_editClicked(id) {
        var ppkz_id2 = id;
        document.cookie = "pptkz_id2=" + ppkz_id2;
        setCookie('pptkz_id2', ppkz_id2);
        setCookie('ppkz_id2', -1);
        //alert('kz_editClicked --- ' + ppkz_id2);
        var l = "{% url 'karzav_edit' %}";
        location.href = l;
    };
    function karzav_deleteClicked(id) {
        $('#confirm-tempkzdelete-button').data('karzav-id', id);
        document.getElementById("delete-tempkarzav-dialog").style.display = "flex";
    };

    {#function it_editClicked(button) {#}
    {#    var ppit_id2 = button.value;//document.getElementById("iteditbtn").value;#}
    {#    document.cookie = "ppit_id2=" + ppit_id2;#}
    {#    setCookie('ppit_id2', ppit_id2);#}
    {#    setCookie('pptit_id2', -1);#}
    {#    //alert('it_editClicked --- ' + ppit_id2);#}
    {#    var l = "{% url 'invtech_edit' %}";#}
    {#    location.href = l;#}
    {# };#}

    
    function tit_showClicked(id) {
        var pptit_id1 = id;//document.getElementById("titshowbtn").value;
        document.cookie = "pptit_id1=" + pptit_id1;
        setCookie('pptit_id1', pptit_id1);
        setCookie('pptkz_id1', -1);
        //alert(pptit_id1);
        var l = "{% url 'polls:myapplication' %}";
        location.href = l;
    };
    function tit_editClicked(id) {
        var pptit_id2 = id;//document.getElementById("titeditbtn").value;
        document.cookie = "pptit_id2=" + pptit_id2;
        setCookie('pptit_id2', pptit_id2);
        setCookie('ppit_id2', -1);
        //alert('tit_editClicked --- ' + pptit_id2);
        var l = "{% url 'invtech_edit' %}";
        location.href = l;
    };
    function tit_deleteClicked(id) {
        $('#confirm-titdelete-button').data('tit-id', id);
        document.getElementById("delete-tit-dialog").style.display = "flex";
    }

    function tkz_showClicked(id) {
        var pptkz_id1 = id;//document.getElementById("tkzshowbtn").value;
        document.cookie = "pptkz_id1=" + pptkz_id1;
        setCookie('pptkz_id1', pptkz_id1);
        setCookie('pptit_id1', -1);
        //alert(pptkz_id1);
        var l = "{% url 'polls:myapplication' %}";
        location.href = l;
    };
    function tkz_editClicked(id) {
        var pptkz_id2 = id;//document.getElementById("titeditbtn").value;
        document.cookie = "pptkz_id2=" + pptkz_id2;
        setCookie('pptkz_id2', pptkz_id2);
        setCookie('ppkz_id2', -1);
        //alert('tkz_editClicked --- ' + pptkz_id2);
        var l = "{% url 'material_edit' %}";
        location.href = l;
    };
    function tkz_deleteClicked(id) {
        $('#confirm-tkzdelete-button').data('tkz-id', id);
        document.getElementById("delete-tkz-dialog").style.display = "flex";
    };

    window.onload = function() {
            MaskedInput({
               elm: document.getElementById('phone'),
               format: '+7 (7__) ___-__-__',
               separator: '+7 (7)--'
            });
         };
    (function(a){a.MaskedInput=function(f){if(!f||!f.elm||!f.format){return null}if(!(this instanceof a.MaskedInput)){return new a.MaskedInput(f)}var o=this,d=f.elm,s=f.format,i=f.allowed||"0123456789",h=f.allowedfx||function(){return true},p=f.separator||"/:-",n=f.typeon||"_YMDhms",c=f.onbadkey||function(){},q=f.onfilled||function(){},w=f.badkeywait||0,A=f.hasOwnProperty("preserve")?!!f.preserve:true,l=true,y=false,t=s,j=(function(){if(window.addEventListener){return function(E,C,D,B){E.addEventListener(C,D,(B===undefined)?false:B)}}if(window.attachEvent){return function(D,B,C){D.attachEvent("on"+B,C)}}return function(D,B,C){D["on"+B]=C}}()),u=function(){for(var B=d.value.length-1;B>=0;B--){for(var D=0,C=n.length;D<C;D++){if(d.value[B]===n[D]){return false}}}return true},x=function(C){try{C.focus();if(C.selectionStart>=0){return C.selectionStart}if(document.selection){var B=document.selection.createRange();return -B.moveStart("character",-C.value.length)}return -1}catch(D){return -1}},b=function(C,E){try{if(C.selectionStart){C.focus();C.setSelectionRange(E,E)}else{if(C.createTextRange){var B=C.createTextRange();B.move("character",E);B.select()}}}catch(D){return false}return true},m=function(D){D=D||window.event;var C="",E=D.which,B=D.type;if(E===undefined||E===null){E=D.keyCode}if(E===undefined||E===null){return""}switch(E){case 8:C="bksp";break;case 46:C=(B==="keydown")?"del":".";break;case 16:C="shift";break;case 0:case 9:case 13:C="etc";break;case 37:case 38:case 39:case 40:C=(!D.shiftKey&&(D.charCode!==39&&D.charCode!==undefined))?"etc":String.fromCharCode(E);break;default:C=String.fromCharCode(E);break}return C},v=function(B,C){if(B.preventDefault){B.preventDefault()}B.returnValue=C||false},k=function(B){var D=x(d),F=d.value,E="",C=true;switch(C){case (i.indexOf(B)!==-1):D=D+1;if(D>s.length){return false}while(p.indexOf(F.charAt(D-1))!==-1&&D<=s.length){D=D+1}if(!h(B,D)){c(B);return false}E=F.substr(0,D-1)+B+F.substr(D);if(i.indexOf(F.charAt(D))===-1&&n.indexOf(F.charAt(D))===-1){D=D+1}break;case (B==="bksp"):D=D-1;if(D<0){return false}while(i.indexOf(F.charAt(D))===-1&&n.indexOf(F.charAt(D))===-1&&D>1){D=D-1}E=F.substr(0,D)+s.substr(D,1)+F.substr(D+1);break;case (B==="del"):if(D>=F.length){return false}while(p.indexOf(F.charAt(D))!==-1&&F.charAt(D)!==""){D=D+1}E=F.substr(0,D)+s.substr(D,1)+F.substr(D+1);D=D+1;break;case (B==="etc"):return true;default:return false}d.value="";d.value=E;b(d,D);return false},g=function(B){if(i.indexOf(B)===-1&&B!=="bksp"&&B!=="del"&&B!=="etc"){var C=x(d);y=true;c(B);setTimeout(function(){y=false;b(d,C)},w);return false}return true},z=function(C){if(!l){return true}C=C||event;if(y){v(C);return false}var B=m(C);if((C.metaKey||C.ctrlKey)&&(B==="X"||B==="V")){v(C);return false}if(C.metaKey||C.ctrlKey){return true}if(d.value===""){d.value=s;b(d,0)}if(B==="bksp"||B==="del"){k(B);v(C);return false}return true},e=function(C){if(!l){return true}C=C||event;if(y){v(C);return false}var B=m(C);if(B==="etc"||C.metaKey||C.ctrlKey||C.altKey){return true}if(B!=="bksp"&&B!=="del"&&B!=="shift"){if(!g(B)){v(C);return false}if(k(B)){if(u()){q()}v(C,true);return true}if(u()){q()}v(C);return false}return false},r=function(){if(!d.tagName||(d.tagName.toUpperCase()!=="INPUT"&&d.tagName.toUpperCase()!=="TEXTAREA")){return null}if(!A||d.value===""){d.value=s}j(d,"keydown",function(B){z(B)});j(d,"keypress",function(B){e(B)});j(d,"focus",function(){t=d.value});j(d,"blur",function(){if(d.value!==t&&d.onchange){d.onchange()}});return o};o.resetField=function(){d.value=s};o.setAllowed=function(B){i=B;o.resetField()};o.setFormat=function(B){s=B;o.resetField()};o.setSeparator=function(B){p=B;o.resetField()};o.setTypeon=function(B){n=B;o.resetField()};o.setEnabled=function(B){l=B};return r()}}(window));
</script>
